/*
ARIA Footnote Generator Module R1.0
Copyright 2010-2013 Bryan Garaventa (WhatSock.com)
Part of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License
*/
(function(){$A.setFootnotes=function(o,h,c){var c=c||{},d=c.className||"footnote",p=c.fnText||"_Footnote",a=c.targId||"fns",k=c.hMax||1;$A.setFootnotes.generateFootnotes=function(q){var i=$A.getEl(a),r=0,f=$A.createEl("table"),s=null;$A.query("span.footnote",function(u,v){$A.setAttr(v,{role:"link",tabindex:"0"});v.appendChild($A.createEl("span",null,null,"screenReading",document.createTextNode(p)));v.appendChild($A.createEl("sup",null,null,null,document.createTextNode(u+1)));var y=$A.createEl("td"),w=$A.createEl("div"),x=$A.createEl("div",{role:"link",tabindex:"0"},null,"footnote"),t=$A.createEl("div");x.innerHTML='<span class="fnIndex">&#8224; [<span class="screenReading">'+p+"</span>"+(u+1)+"] </span>"+q["-"+v.id];w.appendChild(x);w.appendChild(t);$A.query("a",x,function(){t.appendChild(this)});y.appendChild(w);if(r==0||k===1){s=$A.createEl("tr");f.appendChild(s);r=1}else{if(r>=(k-1)){r=0}else{r+=1}}s.appendChild(y);$A.bind(v,{keypress:function(A){var z=A.which||A.keyCode;if(z==13||z==32){x.focus();A.preventDefault()}},click:function(z){x.focus();z.preventDefault()}});$A.bind(x,{keypress:function(A){var z=A.which||A.keyCode;if(z==13||z==32){v.focus();A.preventDefault()}},click:function(z){v.focus();z.preventDefault()}})});i.appendChild(f)};if(!h){$A.getScript(o)}else{if(h===1){var m={},g=$A.createEl("div"),b=$A.query("span.footnote"),n=0,l=b.length;for(var e=0;e<l;e++){var j=b[e];$A.load(g,o+" #-"+j.id,function(f){m["-"+j.id]=g.innerHTML;n+=1;if(n===l){$A.setFootnotes.generateFootnotes(m)}})}}}}})();